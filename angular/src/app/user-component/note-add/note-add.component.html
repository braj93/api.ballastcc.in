<div class="main-content">
    <div *ngFor="let alert of userService.alerts">
        <alert [type]="alert.type" [dismissOnTimeout]="alert.timeout">{{ alert.msg }}</alert>
    </div>
    <div class="container-fluid">
        <div class="card">
            <div class="card-body">
                <div class="row">
                    <div class="col-md-12">
                        <button class="btn-text-icon back-page-btn" (click)="back()"><i
                                class="icons-arrow-up"></i>Back</button>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-4">
                        <div class="info-item">
                            <span>Name:</span>
                            <p>{{detail.crm_contact_name | titlecase }}</p>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="info-item">
                            <span>Email:</span>
                            <p><a href="mailto:{{detail.crm_contact_email}}" (click)="mail(detail.crm_contact_email, detail.crm_contact_id)">{{detail.crm_contact_email}}</a></p>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="info-item">
                            <span>Phone:</span>
                            <p>{{detail.crm_contact_phone ? formatPhoneNumber(detail.crm_contact_phone) : '--'}}</p>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="info-item">
                            <span>Birthday:</span>
                            <p>{{ detail.birthday_month ? detail.birthday_month : '--' }}/{{ detail.birthday_year == 0 ? '--' : detail.birthday_year }}</p>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="info-item">
                            <span>Street:</span>
                            <p>{{ detail.crm_contact_street ? detail.crm_contact_street : '--' }}</p>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="info-item">
                            <span>City:</span>
                            <p>{{ detail.crm_contact_city ? detail.crm_contact_city : '--' }}</p>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="info-item">
                            <span>State:</span>
                            <p>{{ detail.crm_contact_state ? detail.crm_contact_state : '--' }}</p>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="info-item">
                            <span>Zipcode:</span>
                            <p>{{ detail.crm_contact_zipcode ? detail.crm_contact_zipcode : '--' }}</p>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="info-item">
                            <span>Added On:</span>
                            <p>{{ detail.created_at | date: 'mediumDate' }}</p>
                        </div>
                    </div>
                </div>
                <tabset #staticTabs>
                    <tab tab1 heading="Notes" id="first">
                        <div *ngIf="rows?.length > 0">
                            <div class="container" *ngFor="let row of rows">
                                <span class="person-name">{{ row.name }}</span>
                                <p>{{row.note}}</p>
                                <span class="time-right">{{row.created_at | date: 'mediumDate'}}
                                    {{ momentAgo(row.created_at) }}</span>
                            </div>
                        </div>
                        <div *ngIf="rows?.length == 0">
                            <div class="container text-center">
                                <p class="no-table-data">No data to display</p>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-sm-12">
                                <form [formGroup]="addNoteForm" (ngSubmit)="submitForm()">
                                    <div class="form-content row">
                                        <div class="col-md-12">
                                            <div class="form-field">
                                                <label class="text-left">Note</label>
                                                <textarea formControlName="note" class="regular-form"></textarea>
                                            </div>
                                        </div>
                                        <div class="col-md-12">
                                            <div class="text-right">
                                                <button class="btn btn-primary text-white"
                                                    [disabled]="!addNoteForm.valid || isSubmitting"
                                                    [ngClass]="{'btn-loading': isSubmitting}">
                                                    <div class="loader"></div>Add
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </tab>
                    <tab tab2 heading="Logs" id="second">
                        <div *ngIf="logs?.length > 0">
                            <div class="container" *ngFor="let log of logs">
                                <span class="person-name">{{ log.campaign_name ? log.campaign_name :  log.type }}</span>
                                <p>{{log.message ? log.message : '--'}}</p>
                                <span class="time-right">{{log.created_at | date: 'mediumDate'}}
                                    {{log.created_at | date: 'shortTime'}}</span>
                            </div>
                        </div>
                        <div *ngIf="logs?.length == 0">
                            <div class="container text-center">
                                No data to display
                            </div>
                        </div>
                        <div class="block-footer" *ngIf="pages?.length > 1">
                            <div class="row">
                                <div class="col-sm-12">
                                    <ul class="pagination">
                                        <li class="page-item">
                                            <a [class.isDisabled]="current_page === 1" class="page-link"
                                                aria-label="Previous" (click)="paginationAction('prev')">
                                                <span aria-hidden="true">&laquo;</span>
                                            </a>
                                        </li>
                                        <li class="page-item" *ngFor="let page of pages">
                                            <a [class.isSelected]="current_page === page+1" class="page-link"
                                                (click)="setPage(page+1)">{{page+1}}</a>
                                        </li>
                                        <li class="page-item">
                                            <a [class.isDisabled]="current_page === last_index" class="page-link"
                                                aria-label="Next" (click)="paginationAction('next')">
                                                <span aria-hidden="true">&raquo;</span>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </tab>
                </tabset>
            </div>
        </div>
    </div>
</div>