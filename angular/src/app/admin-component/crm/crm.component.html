<div class="main-content">
    <div *ngFor="let alert of userService.alerts">
        <alert [type]="alert.type" [dismissOnTimeout]="alert.timeout">{{ alert.msg }}</alert>
    </div>
    <div class="container-fluid">
                <div class="card">
                    <div class="card-body">
                        <div class="search-header-block row mb-4">
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <input type="text" class="regular-form" id="search" placeholder="Search by Name, Email" [(ngModel)]="parameters.keyword" (keyup)="search($event)">
                                </div>
                            </div>
                            <div class="col-sm-9 text-right">
                                <button (click)="exportCRMContactFile()" class="btn-text mr-sm-3"><i class="icons-move_to_inbox"></i> Export Contacts</button>
                                <button class="btn-text mr-sm-3" (click)="downloadSampleFile()"><i class="icons-save_alt"></i> Download Sample File</button>
                                <button (click)="openBulkImportModal()" class="btn btn-primary btn-default mr-sm-3">Bulk import</button>
                                <button class="btn btn-primary" (click)="openAddModal()"><i class="icons-plus"></i>Add Contact</button>
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="table-responsive">
                                <ngx-datatable #table class="material" [rows]="rows" [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50" [rowHeight]="50" [scrollbarV]="false" [externalPaging]="true" [count]="counts" [offset]="page_no" [limit]="parameters?.pagination?.limit" (page)='setPage($event)' (sort)="onSort($event)">
                                    <ngx-datatable-column name="Name" [sortable]="false">
                                        <ng-template let-rowIndex="rowIndex" let-row="row" let-value="value" ngx-datatable-cell-template>
                                            <a matTooltip="View Contact Info" [routerLink]="['/user/note/add/', row.crm_contact_guid]" [matTooltipPosition]="'below'">{{row.crm_contact_name | titlecase}}</a>
                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column name="Email" [sortable]="false">
                                        <ng-template let-rowIndex="rowIndex" let-row="row" let-value="value" ngx-datatable-cell-template>
                                        <a href="mailto:{{row.crm_contact_email}}">{{row.crm_contact_email}}</a>
                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column name="Phone" [sortable]="false">
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.crm_contact_phone ? formatPhoneNumber(row.crm_contact_phone) : '--'}}
                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column name="Business Attached">
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.name | titlecase}}
                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column name="Date Added" [sortable]="false">
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.created_at | date: 'mediumDate'}}
                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column name="Actions" [sortable]="false">
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                        <div class="td-action">
                                            <a matTooltip="Edit" (click)="openEditModal(row.crm_contact_guid)" [matTooltipPosition]="'below'"><i class="icons-create"></i></a>
                                            <a matTooltip="View Contact Info" [routerLink]="['/user/note/add/', row.crm_contact_guid]" [matTooltipPosition]="'below'"><i class="icons-remove_red_eye"></i></a>
                                        </div>
                                    </ng-template>
                                    </ngx-datatable-column>
                                </ngx-datatable>
                            </div>
                        </div>
                    </div>
                </div>
    </div>
</div>